<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="page" content="blog">
    <link rel="stylesheet" href="styles.css"/>
    <title>Andreas Moe</title>
    <script src="header.js"></script>
</head>
<body>
<div id="header"></div>
<ul id="posts">
    <li>
        <a href="simple_experiments_with_deceptive_alignment.html"></a>
    </li>
    <li>
        <a href="can_humanity_last_forever.html"></a>
    </li>
    <li>
        <a href="situationally_aware_mesa-optimisers_will_have_long_term_objectives.html"></a>
    </li>
    <li>
        <a href="using_python_to_automate_content_for_a_LaTeX_report.html"></a>
    </li>
    <!--
    <li>
        <a>Eating wild salmon is almost as bad as eating farmed salmon</a>
    </li>

    <li>
        <a>Weighing the harms and benefits of working for a defence contractor</a>
    </li>
    <li>
        <a>Writing a brainfuck interpreter in Haskell</a>
    </li>
    <li>
        <a>My experience with GrapheneOS</a>
    </li>
    -->
</ul>
<script>
  async function fetchBlogTitle(url) {
    const res = await fetch(url);
    const html = await res.text();
    const doc = new DOMParser().parseFromString(html, "text/html");
    return doc.querySelector("#blogtitle")?.textContent?.trim() ?? "Untitled";
  }

  async function loadBlogTitles() {
    const links = Array.from(document.querySelectorAll("#posts a"));
    const titlePromises = links.map(async (link) => {
      const url = link.getAttribute("href");
      try {
        const title = await fetchBlogTitle(url);
        return { link, title };
      } catch (err) {
        console.error(`Error fetching ${url}`, err);
        return { link, title: "(Error)" };
      }
    });

    // wait for all to finish
    const results = await Promise.all(titlePromises);

    const seen = new Set();
    for (const { link, title } of results) {
      seen.add(title);
      link.textContent = title;
    }
  }

  loadBlogTitles();
</script>
</body>
</html>